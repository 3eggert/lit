{"version":3,"sources":["src/lit/backend/locales.js","src/lit/backend/localizations.js","src/lit/backend/sources.js","src/lit/backend/ui.js","src/lit/utils.js"],"names":["document","addEventListener","handleHideLocaleLinkClick","e","preventDefault","Utils","fetch","target","href","method","then","resp","json","hidden","innerHTML","querySelectorAll","forEach","link","edited_rows","localeRows","row","closestLink","closest","matches","html","localizationId","versionsCell","querySelector","classList","remove","localizationRows","tdElem","currentTarget","parseInt","dataset","editing","id","rowElem","edit","isHtmlKey","focus","click","url","action","body","JSON","stringify","localization","translated_value","value","parentElement","checked","handleCloudTranslationLinkClick","translatedText","textareaElem","pellElement","content","inputElems","inputElem","i","allLocalizationRows","localName","refElem","localizationVersionsRows","add","td","localizationKeyRows","textarea","pell","init","element","defaultParagraphSeparator","onChange","style","display","requestInfoRow","contains","handleDeleteLinkClick","confirm","litConfirm","handleRestoreLinkClick","handleStarLinkClick","starred","icon","handleCompleteLinkClick","completed","checkbox","deleteLink","restoreLink","starLink","completeLink","loadingElement","updateFunc","sourceIdElement","sourceId","ok","Promise","reject","status","sync_complete","clearInterval","interval","location","reload","catch","error","window","setInterval","tableElem","button","alert","acceptButtons","rejectButtons","_dropdownOpen","toggle","dropdown","selector","parentNode","resource","global","Object","assign","headers","Rails","csrfToken"],"mappings":"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","file":"app/assets/javascripts/lit/app.js","sourcesContent":["import Utils from '../utils';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const handleHideLocaleLinkClick = e => {\n    e.preventDefault;\n    Utils.fetch(e.target.href, {\n      method: 'PUT'\n    }).then(resp => resp.json())\n      .then(({ hidden }) => {\n        e.target.innerHTML = hidden ? 'Show' : 'Hide';\n      })\n  }\n\n  document.querySelectorAll('.js-hide-locale-link')\n    .forEach(link => link.addEventListener('click', handleHideLocaleLinkClick));\n})","import pell from 'pell';\nimport Utils from '../utils';\n\nlet edited_rows = {};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const localeRows = document.querySelectorAll('td.locale_row');\n\n  localeRows.forEach(row => {\n    row.addEventListener('click', e => {\n      const closestLink = Utils.closest(e.target, 'a');\n\n      if (closestLink && closestLink.matches('.show_prev_versions')) {\n        e.preventDefault();\n        Utils.fetch(closestLink.href, { method: 'GET' })\n          .then(resp => resp.json())\n          .then(({ html, localizationId }) => {\n            const versionsCell = Utils.closest(closestLink, 'tbody')\n              .querySelector(`.localization_versions_row[data-id=\"${localizationId}\"] td`);\n            Utils.closest(versionsCell, 'tr').classList.remove('hidden');\n            versionsCell.innerHTML = html;\n          })\n      }\n    });\n  });\n\n  const localizationRows = document.querySelectorAll('td.localization_row[data-editing=\"0\"]');\n\n  localizationRows.forEach(row => {\n    row.addEventListener('click', e => {\n      const tdElem = e.currentTarget;\n      if (!parseInt(tdElem.dataset.editing)) {\n        edited_rows[tdElem.dataset.id] = tdElem.innerHTML;\n        const rowElem = document.querySelector(`td.localization_row[data-id=\"${tdElem.dataset.id}\"]`);\n        if (!parseInt(tdElem.dataset.editing) && tdElem.dataset.edit) {\n          tdElem.dataset.editing = '1';\n          fetch(tdElem.dataset.edit)\n            .then(resp => resp.json())\n            .then(({ html, isHtmlKey }) => {\n              rowElem.dataset.editing = 1;\n              rowElem.innerHTML = html;\n              rowElem.querySelector('textarea, input').focus();\n              if (isHtmlKey) {\n                rowElem.querySelector('.wysiwyg_switch').click()\n              }\n\n              rowElem.querySelector('form').addEventListener('submit', e => {\n                const url = e.target.action;\n                Utils.fetch(url, {\n                  method: 'PATCH',\n                  body: JSON.stringify({\n                    localization: {\n                      translated_value: rowElem.querySelector('textarea').value\n                    }\n                  })\n                })\n                  .then(resp => resp.json())\n                  .then(({ localizationId, html }) => {\n                    delete rowElem.dataset.editing;\n                    rowElem.innerHTML = html;\n                    rowElem.parentElement.querySelector('.show_prev_versions').classList.remove('hidden');\n                    document.querySelector(`a.change_completed_${localizationId} input[type=\"checkbox\"]`).checked = true;\n                  })\n                e.preventDefault();\n              });\n\n              const handleCloudTranslationLinkClick = e => {\n                e.preventDefault();\n                const url = e.target.href;\n                Utils.fetch(url).then(resp => resp.json()).then(\n                  ({ translatedText }) => {\n                    if (typeof (translatedText) === 'string') {\n                      const textareaElem = rowElem.querySelector('textarea');\n                      textareaElem.value = translatedText;\n                      if (isHtmlKey) {\n                        const pellElement = rowElem.querySelector('.pell');\n                        pellElement.content.innerHTML = translatedText;\n                      }\n                    } else if (typeof (translatedText) === 'object') {\n                      const inputElems = rowElem.querySelectorAll('input[type=\"text\"]');\n                      inputElems.forEach((inputElem, i) => inputElem.value = translatedText[i]);\n                    }\n                  }\n                );\n              }\n\n              rowElem.querySelectorAll('.js-cloud-translation-link').forEach(link => {\n                link.addEventListener('click', handleCloudTranslationLinkClick);\n              });\n            });\n        }\n      }\n    })\n  });\n\n  const allLocalizationRows = document.querySelectorAll('td.localization_row');\n\n  allLocalizationRows.forEach(row => {\n    row.addEventListener('click', e => {\n      if (e.target.matches('form button.cancel')) {\n        if (e.target.localName === 'button') {\n          const refElem = Utils.closest(e.target, 'td.localization_row');\n          refElem.dataset.editing = '0';\n          refElem.innerHTML = edited_rows[refElem.dataset.id];\n          e.preventDefault();\n          return false;\n        }\n      }\n    })\n  });\n\n  const localizationVersionsRows = document.querySelectorAll('tr.localization_versions_row');\n\n  localizationVersionsRows.forEach(row => {\n    row.addEventListener('click', e => {\n      if (e.target.matches('.close_versions')) {\n        const refElem = Utils.closest(e.target, 'tr.localization_versions_row');\n        refElem.classList.add('hidden');\n        refElem.querySelectorAll('td').forEach(td => td.innerHTML = '');\n      }\n    })\n  });\n\n  const localizationKeyRows = document.querySelectorAll('tr.localization_key_row');\n\n  localizationKeyRows.forEach(row => {\n    row.addEventListener('click', e => {\n      if (e.target.matches('input.wysiwyg_switch')) {\n        const refElem = Utils.closest(e.target, 'form');\n        const textarea = refElem.querySelector('textarea');\n        const pellElement = refElem.querySelector('.pell');\n\n        if (e.target.checked) {\n          if (!pellElement.content) {\n            pell.init({\n              element: pellElement,\n              defaultParagraphSeparator: '',\n              onChange: html => textarea.value = html\n            });\n          }\n\n          pellElement.content.innerHTML = textarea.value;\n          textarea.style.display = 'none';\n          pellElement.style.display = '';\n        } else {\n          textarea.style.display = '';\n          pellElement.style.display = 'none';\n        }\n      }\n\n      if (e.target.matches('.request_info_link')) {\n        const refElem = Utils.closest(e.target, 'tr.localization_key_row');\n        requestInfoRow = refElem.querySelector('.request_info_row');\n        if (requestInfoRow.classList.contains('hidden')) {\n          requestInfoRow.classList.remove('hidden');\n        } else {\n          requestInfoRow.classList.add('hidden');\n        }\n      }\n    });\n\n    const handleDeleteLinkClick = (e) => {\n      e.preventDefault();\n      const link = Utils.closest(e.target, 'a');\n      if (confirm(link.dataset.litConfirm)) {\n        Utils.fetch(link.href, { method: 'DELETE' })\n          .then(() => Utils.closest(link, 'tr').remove());\n      }\n    }\n\n    const handleRestoreLinkClick = (e) => {\n      e.preventDefault();\n      const link = Utils.closest(e.target, 'a');\n      Utils.fetch(link.href, { method: 'PUT' })\n        .then(() => Utils.closest(link, 'tr').remove());\n    }\n\n    const handleStarLinkClick = (e) => {\n      e.preventDefault();\n      const link = Utils.closest(e.target, 'a');\n      Utils.fetch(link.href, { method: 'GET' })\n        .then(resp => resp.json())\n        .then(({ starred }) => {\n          const icon = link.querySelector('i');\n          if (starred) {\n            icon.classList.add('fa-star');\n            icon.classList.remove('fa-star-o');\n          } else {\n            icon.classList.add('fa-star-o');\n            icon.classList.remove('fa-star');\n          }\n        });\n    }\n\n    const handleCompleteLinkClick = (e) => {\n      e.preventDefault();\n      const link = Utils.closest(e.target, 'a');\n      Utils.fetch(link.href, { method: 'PUT' })\n        .then(resp => resp.json())\n        .then(({ completed }) => {\n          const icon = link.querySelector('i');\n          if (completed) {\n            icon.classList.add('fa-check-circle');\n            icon.classList.remove('fa-check-circle-o');\n          } else {\n            icon.classList.add('fa-check-circle-o');\n            icon.classList.remove('fa-check-circle');\n          }\n          Utils.closest(link, 'tr').querySelectorAll('input[type=\"checkbox\"]').forEach(checkbox => checkbox.checked = completed);\n        });\n    }\n\n    row.querySelectorAll('.js-delete-localization-key')\n      .forEach(deleteLink => deleteLink.addEventListener('click', handleDeleteLinkClick));\n\n    row.querySelectorAll('.js-restore-localization-key')\n      .forEach(restoreLink => restoreLink.addEventListener('click', handleRestoreLinkClick));\n\n    row.querySelectorAll('.js-star-localization-key')\n      .forEach(starLink => starLink.addEventListener('click', handleStarLinkClick));\n\n    row.querySelectorAll('.js-complete-localization-key')\n      .forEach(completeLink => completeLink.addEventListener('click', handleCompleteLinkClick));\n  });\n})","import Utils from '../utils';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const loadingElement = document.querySelector('.loading');\n\n  const updateFunc = () => {\n    const sourceIdElement = document.querySelector('#source_id');\n    if (!sourceIdElement) { return; }\n\n    const sourceId = sourceIdElement.value;\n\n    fetch(`/lit/sources/${sourceId}/sync_complete`)\n      .then(resp => {\n        if (resp.ok) {\n          return resp.json();\n        } else {\n          return Promise.reject({ status: resp.status });\n        }\n      })\n      .then(json => {\n        if (json.sync_complete) {\n          loadingElement.classList.add('loaded');\n          loadingElement.classList.remove('loading');\n          clearInterval(interval);\n          location.reload();\n        }\n      })\n      .catch(error => {\n        switch (error.status) {\n          case 404:\n            loadingElement.innerHTML = 'Could not update synchronization status, please try refreshing page';\n            break;\n          case 401:\n            loadingElement.innerHTML = 'You are not authorized. Please check if you are properly logged in';\n            break;\n          case 500:\n            loadingElement.innerHTML = 'Something went wrong, please try synchronizing again';\n            break;\n          default:\n            loadingElement.innerHTML = 'An unknown error occurred. Please try again'\n        }\n        clearInterval(interval);\n      });\n  }\n\n  if (loadingElement) {\n    window.interval = setInterval(updateFunc, 500);\n  }\n\n  const tableElem = document.querySelector('.incomming-localizations-table');\n\n  tableElem && tableElem.addEventListener('click', e => {\n    const button = e.target;\n    if (button.matches('.js-accept-btn')) {\n      e.preventDefault();\n      const url = e.target.href;\n      Utils.fetch(url, {\n        method: 'GET'\n      })\n        .then(({ ok }) => {\n          if (ok) {\n            button.parentElement.parentElement.remove(); // remove row\n          } else {\n            alert('Localization could not be accepted.');\n          }\n        })\n    }\n\n    if (button.matches('.js-reject-btn')) {\n      e.preventDefault();\n      if (confirm(\"Are you sure?\")) {\n        const url = e.target.href;\n        Utils.fetch(url, {\n          method: 'DELETE'\n        })\n          .then(({ ok }) => {\n            if (ok) {\n              button.parentElement.parentElement.remove(); // remove row\n            } else {\n              alert('Localization could not be rejected.');\n            }\n          })\n      }\n    }\n  });\n\n  const acceptButtons = document.querySelectorAll('.js-accept-btn');\n  const rejectButtons = document.querySelectorAll('.js-reject-btn');\n})","document.addEventListener('click', e => {\n  if (e.target.matches('[data-toggle=\"dropdown\"]')) {\n    document._dropdownOpen = true;\n    e.target.parentElement.classList.toggle('open');\n  } else {\n    document._dropdownOpen && document.querySelectorAll('.dropdown.open, .btn-group.open').forEach(dropdown => dropdown.classList.remove('open'));\n    document._dropdownOpen = false;\n  }\n});","const Utils = {\n  closest: (refElem, selector) => {\n    while (!refElem.matches(selector)) {\n      refElem = refElem.parentNode;\n      if (!refElem) { return; }\n    }\n    return refElem;\n  },\n\n  fetch: (resource, init) => {\n    return global.fetch(\n      resource,\n      Object.assign({}, {\n        headers: {\n          'X-CSRF-Token': Rails.csrfToken(),\n          'Content-Type': 'application/json'\n        }\n      }, init)\n    );\n  }\n}\n\nexport default Utils;"]}