{"version":3,"sources":["src/lit/backend/locales.js","src/lit/backend/localizations.js","src/lit/backend/sources.js","src/lit/backend/ui.js","src/lit/utils.js"],"names":["document","addEventListener","handleHideLocaleLinkClick","e","preventDefault","Utils","fetch","target","href","method","then","resp","json","hidden","innerHTML","querySelectorAll","forEach","link","edited_rows","localizationRows","row","tdElem","currentTarget","parseInt","dataset","editing","id","rowElem","querySelector","edit","html","isHtmlKey","focus","click","url","action","body","JSON","stringify","localization","translated_value","value","localizationId","parentElement","classList","remove","checked","handleCloudTranslationLinkClick","translatedText","textareaElem","pellElement","content","inputElems","inputElem","i","allLocalizationRows","matches","localName","refElem","closest","localizationVersionsRows","add","td","localizationKeyRows","textarea","pell","init","element","defaultParagraphSeparator","onChange","style","display","requestInfoRow","contains","handleDeleteLinkClick","confirm","litConfirm","handleRestoreLinkClick","handleStarLinkClick","starred","icon","handleCompleteLinkClick","completed","checkbox","deleteLink","restoreLink","starLink","completeLink","loadingElement","updateFunc","sourceIdElement","sourceId","ok","Promise","reject","status","sync_complete","clearInterval","interval","location","reload","catch","error","window","setInterval","tableElem","button","alert","acceptButtons","rejectButtons","_dropdownOpen","toggle","dropdown","selector","parentNode","resource","global","Object","assign","headers","Rails","csrfToken"],"mappings":"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","file":"app/assets/javascripts/lit/app.js","sourcesContent":["import Utils from '../utils';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const handleHideLocaleLinkClick = e => {\n    e.preventDefault;\n    Utils.fetch(e.target.href, {\n      method: 'PUT'\n    }).then(resp => resp.json())\n      .then(({ hidden }) => {\n        e.target.innerHTML = hidden ? 'Show' : 'Hide';\n      })\n  }\n\n  document.querySelectorAll('.js-hide-locale-link')\n    .forEach(link => link.addEventListener('click', handleHideLocaleLinkClick));\n})","import pell from 'pell';\nimport Utils from '../utils';\n\nlet edited_rows = {};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const localizationRows = document.querySelectorAll('td.localization_row[data-editing=\"0\"]');\n\n  localizationRows.forEach(row => {\n    row.addEventListener('click', e => {\n      const tdElem = e.currentTarget;\n      if (!parseInt(tdElem.dataset.editing)) {\n        edited_rows[tdElem.dataset.id] = tdElem.innerHTML;\n        const rowElem = document.querySelector(`td.localization_row[data-id=\"${tdElem.dataset.id}\"]`);\n        if (!parseInt(tdElem.dataset.editing) && tdElem.dataset.edit) {\n          tdElem.dataset.editing = '1';\n          fetch(tdElem.dataset.edit)\n            .then(resp => resp.json())\n            .then(({ html, isHtmlKey }) => {\n              rowElem.dataset.editing = 1;\n              rowElem.innerHTML = html;\n              rowElem.querySelector('textarea, input').focus();\n              if (isHtmlKey) {\n                rowElem.querySelector('.wysiwyg_switch').click()\n              }\n\n              rowElem.querySelector('form').addEventListener('submit', e => {\n                const url = e.target.action;\n                Utils.fetch(url, {\n                  method: 'PATCH',\n                  body: JSON.stringify({\n                    localization: {\n                      translated_value: rowElem.querySelector('textarea').value\n                    }\n                  })\n                })\n                  .then(resp => resp.json())\n                  .then(({ localizationId, html }) => {\n                    delete rowElem.dataset.editing;\n                    rowElem.innerHTML = html;\n                    rowElem.parentElement.querySelector('.show_prev_versions').classList.remove('hidden');\n                    document.querySelector(`a.change_completed_${localizationId} input[type=\"checkbox\"]`).checked = true;\n                  })\n                e.preventDefault();\n              });\n\n              const handleCloudTranslationLinkClick = e => {\n                e.preventDefault();\n                const url = e.target.href;\n                Utils.fetch(url).then(resp => resp.json()).then(\n                  ({ translatedText }) => {\n                    if (typeof (translatedText) === 'string') {\n                      const textareaElem = rowElem.querySelector('textarea');\n                      textareaElem.value = translatedText;\n                      if (isHtmlKey) {\n                        const pellElement = rowElem.querySelector('.pell');\n                        pellElement.content.innerHTML = translatedText;\n                      }\n                    } else if (typeof (translatedText) === 'object') {\n                      const inputElems = rowElem.querySelectorAll('input[type=\"text\"]');\n                      inputElems.forEach((inputElem, i) => inputElem.value = translatedText[i]);\n                    }\n                  }\n                );\n              }\n\n              rowElem.querySelectorAll('.js-cloud-translation-link').forEach(link => {\n                link.addEventListener('click', handleCloudTranslationLinkClick);\n              });\n            });\n        }\n      }\n    })\n  });\n\n  const allLocalizationRows = document.querySelectorAll('td.localization_row');\n\n  allLocalizationRows.forEach(row => {\n    row.addEventListener('click', e => {\n      if (e.target.matches('form button.cancel')) {\n        if (e.target.localName === 'button') {\n          const refElem = Utils.closest(e.target, 'td.localization_row');\n          refElem.dataset.editing = '0';\n          refElem.innerHTML = edited_rows[refElem.dataset.id];\n          e.preventDefault();\n          return false;\n        }\n      }\n    })\n  });\n\n  const localizationVersionsRows = document.querySelectorAll('tr.localization_versions_row');\n\n  localizationVersionsRows.forEach(row => {\n    row.addEventListener('click', e => {\n      if (e.target.matches('.close_versions')) {\n        const refElem = Utils.closest(e.target, 'tr.localization_versions_row');\n        refElem.classList.add('hidden');\n        refElem.querySelectorAll('td').forEach(td => td.innerHTML = '');\n      }\n    })\n  });\n\n  const localizationKeyRows = document.querySelectorAll('tr.localization_key_row');\n\n  localizationKeyRows.forEach(row => {\n    row.addEventListener('click', e => {\n      if (e.target.matches('input.wysiwyg_switch')) {\n        const refElem = Utils.closest(e.target, 'form');\n        const textarea = refElem.querySelector('textarea');\n        const pellElement = refElem.querySelector('.pell');\n\n        if (e.target.checked) {\n          if (!pellElement.content) {\n            pell.init({\n              element: pellElement,\n              defaultParagraphSeparator: '',\n              onChange: html => textarea.value = html\n            });\n          }\n\n          pellElement.content.innerHTML = textarea.value;\n          textarea.style.display = 'none';\n          pellElement.style.display = '';\n        } else {\n          textarea.style.display = '';\n          pellElement.style.display = 'none';\n        }\n      }\n\n      if (e.target.matches('.request_info_link')) {\n        const refElem = Utils.closest(e.target, 'tr.localization_key_row');\n        requestInfoRow = refElem.querySelector('.request_info_row');\n        if (requestInfoRow.classList.contains('hidden')) {\n          requestInfoRow.classList.remove('hidden');\n        } else {\n          requestInfoRow.classList.add('hidden');\n        }\n      }\n    });\n\n    const handleDeleteLinkClick = (e) => {\n      e.preventDefault();\n      const link = Utils.closest(e.target, 'a');\n      if (confirm(link.dataset.litConfirm)) {\n        Utils.fetch(link.href, { method: 'DELETE' })\n          .then(() => Utils.closest(link, 'tr').remove());\n      }\n    }\n\n    const handleRestoreLinkClick = (e) => {\n      e.preventDefault();\n      const link = Utils.closest(e.target, 'a');\n      Utils.fetch(link.href, { method: 'PUT' })\n        .then(() => Utils.closest(link, 'tr').remove());\n    }\n\n    const handleStarLinkClick = (e) => {\n      e.preventDefault();\n      const link = Utils.closest(e.target, 'a');\n      Utils.fetch(link.href, { method: 'GET' })\n        .then(resp => resp.json())\n        .then(({ starred }) => {\n          const icon = link.querySelector('i');\n          if (starred) {\n            icon.classList.add('fa-star');\n            icon.classList.remove('fa-star-o');\n          } else {\n            icon.classList.add('fa-star-o');\n            icon.classList.remove('fa-star');\n          }\n        });\n    }\n\n    const handleCompleteLinkClick = (e) => {\n      e.preventDefault();\n      const link = Utils.closest(e.target, 'a');\n      Utils.fetch(link.href, { method: 'PUT' })\n        .then(resp => resp.json())\n        .then(({ completed }) => {\n          const icon = link.querySelector('i');\n          if (completed) {\n            icon.classList.add('fa-check-circle');\n            icon.classList.remove('fa-check-circle-o');\n          } else {\n            icon.classList.add('fa-check-circle-o');\n            icon.classList.remove('fa-check-circle');\n          }\n          Utils.closest(link, 'tr').querySelectorAll('input[type=\"checkbox\"]').forEach(checkbox => checkbox.checked = completed);\n        });\n    }\n\n    row.querySelectorAll('.js-delete-localization-key')\n      .forEach(deleteLink => deleteLink.addEventListener('click', handleDeleteLinkClick));\n\n    row.querySelectorAll('.js-restore-localization-key')\n      .forEach(restoreLink => restoreLink.addEventListener('click', handleRestoreLinkClick));\n\n    row.querySelectorAll('.js-star-localization-key')\n      .forEach(starLink => starLink.addEventListener('click', handleStarLinkClick));\n\n    row.querySelectorAll('.js-complete-localization-key')\n      .forEach(completeLink => completeLink.addEventListener('click', handleCompleteLinkClick));\n  });\n})","import Utils from '../utils';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const loadingElement = document.querySelector('.loading');\n\n  const updateFunc = () => {\n    const sourceIdElement = document.querySelector('#source_id');\n    if (!sourceIdElement) { return; }\n\n    const sourceId = sourceIdElement.value;\n\n    fetch(`/lit/sources/${sourceId}/sync_complete`)\n      .then(resp => {\n        if (resp.ok) {\n          return resp.json();\n        } else {\n          return Promise.reject({ status: resp.status });\n        }\n      })\n      .then(json => {\n        if (json.sync_complete) {\n          loadingElement.classList.add('loaded');\n          loadingElement.classList.remove('loading');\n          clearInterval(interval);\n          location.reload();\n        }\n      })\n      .catch(error => {\n        switch (error.status) {\n          case 404:\n            loadingElement.innerHTML = 'Could not update synchronization status, please try refreshing page';\n            break;\n          case 401:\n            loadingElement.innerHTML = 'You are not authorized. Please check if you are properly logged in';\n            break;\n          case 500:\n            loadingElement.innerHTML = 'Something went wrong, please try synchronizing again';\n            break;\n          default:\n            loadingElement.innerHTML = 'An unknown error occurred. Please try again'\n        }\n        clearInterval(interval);\n      });\n  }\n\n  if (loadingElement) {\n    window.interval = setInterval(updateFunc, 500);\n  }\n\n  const tableElem = document.querySelector('.incomming-localizations-table');\n\n  tableElem && tableElem.addEventListener('click', e => {\n    const button = e.target;\n    if (button.matches('.js-accept-btn')) {\n      e.preventDefault();\n      const url = e.target.href;\n      Utils.fetch(url, {\n        method: 'GET'\n      })\n        .then(({ ok }) => {\n          if (ok) {\n            button.parentElement.parentElement.remove(); // remove row\n          } else {\n            alert('Localization could not be accepted.');\n          }\n        })\n    }\n\n    if (button.matches('.js-reject-btn')) {\n      e.preventDefault();\n      if (confirm(\"Are you sure?\")) {\n        const url = e.target.href;\n        Utils.fetch(url, {\n          method: 'DELETE'\n        })\n          .then(({ ok }) => {\n            if (ok) {\n              button.parentElement.parentElement.remove(); // remove row\n            } else {\n              alert('Localization could not be rejected.');\n            }\n          })\n      }\n    }\n  });\n\n  const acceptButtons = document.querySelectorAll('.js-accept-btn');\n  const rejectButtons = document.querySelectorAll('.js-reject-btn');\n})","document.addEventListener('click', e => {\n  if (e.target.matches('[data-toggle=\"dropdown\"]')) {\n    document._dropdownOpen = true;\n    e.target.parentElement.classList.toggle('open');\n  } else {\n    document._dropdownOpen && document.querySelectorAll('.dropdown.open, .btn-group.open').forEach(dropdown => dropdown.classList.remove('open'));\n    document._dropdownOpen = false;\n  }\n});","const Utils = {\n  closest: (refElem, selector) => {\n    while (!refElem.matches(selector)) {\n      refElem = refElem.parentNode;\n      if (!refElem) { return; }\n    }\n    return refElem;\n  },\n\n  fetch: (resource, init) => {\n    return global.fetch(\n      resource,\n      Object.assign({}, {\n        headers: {\n          'X-CSRF-Token': Rails.csrfToken(),\n          'Content-Type': 'application/json'\n        }\n      }, init)\n    );\n  }\n}\n\nexport default Utils;"]}